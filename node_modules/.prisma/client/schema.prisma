generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model Company {
  id                  String    @id @default(cuid()) @map("_id")
  name                String
  slug                String    @unique
  username            String    @unique // Default to company ID, can be updated
  description         String?
  website             String?
  companyUrl          String[]
  logo                String?
  industry            String[]
  size                String?
  location            String[]
  foundedYear         Int?
  isActive            Boolean   @default(true)
  taxCode             String    @unique
  // Company contact info
  email               String?
  phone               String?
  address             String?
  // Social links
  linkedin            String?
  facebook            String?
  twitter             String?
  // Business settings
  settings            Json? // CompanySettings type
  features            Json? // CompanyFeatures type
  //sum
  nameSum             String?
  // Enhanced search fields with vector embeddings
  //nameEmbedding       Unsupported("vector")? // 384-dim vector for company name
  lastEmbeddingUpdate DateTime? // Track when embeddings were updated
  createdAt           DateTime
  updatedAt           DateTime
}

model Job {
  id                  String    @id @default(cuid()) @map("_id")
  companyId           String
  ownerId             String? // Optional user who created the job
  title               String
  slug                String    @unique
  location            String?
  workArrangement     String? // "remote" | "hybrid" | "onsite"
  jobType             String? // "full-time" | "part-time" | "contract" | "freelance"
  description         String?
  budget              String?
  budgetMin           String?
  budgetMax           String?
  skills              String[]
  requirements        String[]
  status              String
  jobUrl              String?
  applicationDeadline DateTime?
  descriptionRaw      String?
  postedDate          DateTime?

  titleSum            String?
  locationSum         String?
  descriptionSum      String?
  skillsSum           String?
  requirementsSum     String?
  searchableText      String? // Combined searchable text for embedding
  //titleEmbedding        Unsupported("vector")? // 384-dim vector for title
  //descriptionEmbedding  Unsupported("vector")? // 384-dim vector for description
  //skillsEmbedding       Unsupported("vector")? // 384-dim vector for skills
  //locationEmbedding     Unsupported("vector")? // 384-dim vector for location
  //requirementsEmbedding Unsupported("vector")?
  lastEmbeddingUpdate DateTime?
  source              String?
  createdAt           DateTime
  updatedAt           DateTime
}
